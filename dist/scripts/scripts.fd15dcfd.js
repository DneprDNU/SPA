"use strict";angular.module("dnuApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","restAuth","restFaculties","dnuApp.directives"]).config(["$routeProvider","$locationProvider","$httpProvider",function(a,b,c){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/contact",{templateUrl:"views/contact.html",controller:"ContactCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/faculties",{templateUrl:"views/faculties.html",controller:"FacultiesCtrl"}).when("/resources",{templateUrl:"views/resources.html",controller:"ResourcesCtrl"}).otherwise({redirectTo:"/"}),c.defaults.useXDomain=!0,delete c.defaults.headers.common["X-Requested-With"],c.interceptors.push(["$q","$rootScope","$location",function(a,b,c){return{responseError:function(d){var e=d.status,f=d.config,g=f.method,h=f.url;return 401==e?c.path("/login"):b.error=g+" on "+h+" failed with status "+e,a.reject(d)}}}]),c.interceptors.push(["$q","$rootScope","$location",function(a,b){return{request:function(c){if(console.log(b),angular.isDefined(b.authToken)){var d=b.authToken;c.headers["X-Auth-Token"]=d}return c||a.when(c)}}}])}]).run(["$rootScope","$location","$cookieStore","restAuthentication",function(a,b,c,d){a.$on("$viewContentLoaded",function(){delete a.error}),a.hasRole=function(b){return void 0===a.user?!1:void 0===a.user.roles[b]?!1:a.user.roles[b]},a.logout=function(){delete a.user,delete a.authToken,c.remove("authToken"),b.path("/login")};var e=b.path();b.path("/login");var f=c.get("authToken");void 0!==f&&(a.authToken=f,d.get(function(c){a.user=c,b.path(e)})),a.initialized=!0}]),angular.module("dnuApp").controller("MainCtrl",["$scope",function(){}]),angular.module("dnuApp").controller("AboutCtrl",["$scope",function(){}]),angular.module("dnuApp").controller("ContactCtrl",["$scope",function(){}]),angular.module("dnuApp").controller("LoginCtrl",["$scope","$rootScope","$location","$cookieStore","restAuthentication",function(a,b,c,d,e){a.rememberMe=!1,a.login=function(){e.authenticate($.param({username:a.username,password:a.password}),function(f){var g=f.token;console.log(f),b.authToken=g,a.rememberMe&&d.put("authToken",g),e.get(function(a){b.user=a,c.path("/")})})}}]),angular.module("dnuApp").controller("ResourcesCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("dnuApp").controller("FacultiesCtrl",["$scope","$timeout","restFacultiesList",function(a,b,c){a.collection=[],a.update=function(){c.getFacultiesList({},function(b){a.collection=b,console.log(b)})},a.update(),a.addOne=function(){a.collection.push({id:1,title:"Faculty",src:"http://dnu.thebodva.com/upload/b32f3d1ef28edf602362b91cb935886f.jpg"})}}]),angular.module("restAuth",["ngResource"]).factory("restAuthentication",["$rootScope","$resource",function(a,b){return b("http://5.101.104.13:8080/filestorage/login",{},{authenticate:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}})}]),angular.module("restFaculties",["ngResource"]).factory("restFacultiesList",["$resource",function(a){return a("http://5.101.104.13:8080/filestorage/rest/faculty",{},{getFacultiesList:{method:"GET",isArray:!0}})}]),angular.module("dnuApp.directives",[]),angular.module("dnuApp.directives").directive("isotopeDnuContainer",function(){return{link:function(a,b){return a.$on("LastElem",function(){new Isotope("#"+b.get(0).id,{itemSelector:".faculty",layoutMode:"masonry"})}),b}}}).directive("isotopeDnuItem",function(){return function(a,b){return a.$last&&a.$emit("LastElem"),b}});